<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
  <head>
    <title>Ajax File Upload</title>
    <style>
      .prog-border {
        height: 15px;
        width: 205px;
        background: #fff;
        border: 1px solid #000;
        margin: 0;
        padding: 0;
      }

      .prog-bar {
        height: 11px;
        margin: 2px;
        padding: 0px;
        background: #00ff00;
      }
    </style>

    <script src="jquery-1.3.2.min.js" type="text/javascript"></script>
    <script src="jquery.periodicalupdater.js" type="text/javascript"></script>
    <script type="text/javascript">
      <!--
      function checkStatus(){
        $('submitButton').disabled = true;
        $.PeriodicalUpdater({
          url : '/silverpeas/ajaxupload?c=status'
        },
        function(data){
          var myHtml = 'The data returned from the server was: ' + data + '';
          $('#results').html(myHtml);
        });
      }

      function stop(message, files) {
        $('submitButton').disabled = false;
        clearTimeout(PeriodicalTimer);
        if(message != '') {
          $('#results').innerHTML = '<div class="error"><b>Error processing results: ' + message + '</b></div>';
        }
        for(var i=0; i < files.length; i++) {
          var myHtml = ' The file was uploaded here: ' + files[i] + '<br/>';
          $('#results').append(myHtml);
        }

      }
      -->
    </script>
  </head>
  <body>
    <iframe id="target_upload" name="target_upload" src="" style="display: none"></iframe>
    <form enctype="multipart/form-data" name="form" method="post" action="/silverpeas/ajaxupload" onsubmit="checkStatus();" target="target_upload">
      File to upload: <input id="cv" name="cv" type="file" /> <br/>
      Second file to upload: <input id="motivation" name="motivation" type="file" /> <br/>
      <input id="submitButton" type="submit"/>
    </form>
    <div id="results">
      <h3>Results from $.PeriodicalUpdater()</h3>
    </div>
  </body>
</html>